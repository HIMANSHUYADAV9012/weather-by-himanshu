<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HawabaaziüòÖ ‚òÅÔ∏è | By Himanshu Yadav</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fadeIn {
        animation: fadeIn 0.6s ease-in-out;
      }

      #suggestions {
        position: absolute;
        z-index: 50;
        background: white;
        width: 100%;
        border-radius: 0.5rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        overflow: auto;
        max-height: 200px;
      }
      #suggestions div {
        padding: 0.5rem 1rem;
        cursor: pointer;
      }
      #suggestions div:hover {
        background-color: #e2e8f0;
      }

      .himanshu-bubble {
        position: relative;
        background: #f8fafc;
        border-radius: 1rem;
        padding: 1rem;
        margin-top: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .himanshu-bubble:after {
        content: "";
        position: absolute;
        top: -10px;
        left: 20px;
        border-width: 0 10px 10px;
        border-style: solid;
        border-color: #f8fafc transparent;
      }

      /* Music player styles */
      #musicPlayer {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(10px);
        border-radius: 50px;
        padding: 8px 15px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        gap: 10px;
        z-index: 1000;
        transition: all 0.3s ease;
      }
      #musicPlayer:hover {
        background: rgba(255, 255, 255, 0.95);
      }
      #musicControl {
        background: none;
        border: none;
        font-size: 1.2rem;
        cursor: pointer;
        color: #3b82f6;
        transition: transform 0.2s;
      }
      #musicControl:hover {
        transform: scale(1.1);
      }
      #musicInfo {
        font-size: 0.8rem;
        color: #333;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 0;
        transition: max-width 0.3s ease;
      }
      #musicPlayer:hover #musicInfo {
        max-width: 200px;
      }
    </style>
  </head>
  <body
    class="bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300 min-h-screen flex flex-col items-center px-4 py-10 transition-all duration-500 font-sans"
  >
    <div class="text-center w-full max-w-lg">
      <h1
        class="text-5xl font-extrabold mb-6 text-blue-900 drop-shadow-md tracking-wide"
      >
        ‚õÖHawaBaazi
      </h1>

      <!-- Input + Suggestions -->
      <div class="relative w-full md:w-96 mx-auto mb-6 group">
        <div
          class="relative bg-white/30 backdrop-blur-lg border border-white/50 rounded-xl shadow-xl transition-all duration-300 focus-within:ring-2 focus-within:ring-blue-400"
        >
          <input
            id="locationInput"
            type="text"
            oninput="autoSuggest(this.value)"
            placeholder="üåÜ Apna sheher daalo yaar..."
            class="peer px-5 py-3 w-full bg-transparent rounded-xl focus:outline-none text-lg text-gray-800 placeholder-gray-700 font-medium transition-all duration-300 tracking-wide"
          />
          <!-- Voice Search Button -->
          <button
            onclick="startVoice()"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-blue-600 hover:text-blue-800 text-xl transition-transform hover:scale-110"
            title="Voice Search"
          >
            <i class="fas fa-microphone"></i>
          </button>
        </div>
        <div id="suggestions" class="hidden mt-1 z-50"></div>
      </div>

      <!-- Animated Button -->
      <button
        id="checkBtn"
        onclick="getWeather()"
        class="mb-6 px-7 py-3 rounded-full bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-600 hover:from-indigo-600 hover:to-blue-700 transition-all duration-300 text-white font-bold shadow-lg shadow-blue-300/50 hover:shadow-xl hover:scale-105"
      >
        <i class="fas fa-cloud-sun mr-2 animate-pulse"></i> Pata Karo Mausam Ka!
      </button>

      <!-- Search History -->
      <div id="history" class="flex flex-wrap gap-2 justify-center mb-6"></div>

      <!-- Weather Info -->
      <div id="weatherInfo" class="w-full"></div>
    </div>

    <!-- Music Player (initially hidden) -->
    <div id="musicPlayer" style="display: none">
      <button id="musicControl" onclick="toggleMusic()">
        <i class="fas fa-play"></i>
      </button>
      <span id="musicInfo">Weather Music</span>
    </div>

    <!-- Footer -->
    <footer
      class="mt-10 bg-white/30 backdrop-blur-md rounded-2xl p-5 shadow-xl w-full max-w-md animate-fadeIn"
    >
      <div class="flex flex-col items-center gap-3 text-center">
        <h3 class="text-xl font-semibold text-gray-800">
          Designed with ‚ù§Ô∏è by Himanshu Yadav
        </h3>

        <div class="flex flex-wrap justify-center gap-4 mt-2">
          <a
            href="https://instagram.com/himanshu_yadav479"
            target="_blank"
            class="flex items-center gap-2 px-4 py-1.5 bg-pink-100 rounded-full hover:bg-pink-200 transition"
          >
            <i
              class="fab fa-instagram text-pink-600 text-lg hover:scale-125 duration-300"
            ></i>
            <span class="text-sm font-medium text-gray-800">Instagram</span>
          </a>
          <a
            href="https://wa.me/918534866350"
            target="_blank"
            class="flex items-center gap-2 px-4 py-1.5 bg-green-100 rounded-full hover:bg-green-200 transition"
          >
            <i
              class="fab fa-whatsapp text-green-600 text-lg hover:scale-125 duration-300"
            ></i>
            <span class="text-sm font-medium text-gray-800">WhatsApp</span>
          </a>
        </div>

        <a
          href="tel:+918534866350"
          class="flex items-center gap-2 px-4 py-1.5 bg-blue-100 rounded-full hover:bg-blue-200 transition"
        >
          <i
            class="fas fa-phone-alt text-blue-600 text-sm hover:scale-125 duration-300"
          ></i>
          <span class="text-sm font-medium text-gray-800">Call Me</span>
        </a>

        <a
          href="mailto:azp729012@gmail.com"
          class="text-xs text-blue-700 underline hover:text-blue-900 transition"
          >Send Feedback</a
        >

        <p class="text-sm text-gray-600 mt-2">
          ¬© <span id="year"></span> All Rights Reserved
        </p>
      </div>
    </footer>

    <script>
      // Weather activities suggestions
    // Family-friendly & funny activity suggestions based on weather
const weatherActivities = {
  sunny: [
    "‚òÄÔ∏è Aaj ka sun toh celebrity mood mein hai ‚Äì sunglasses mandatory! üòé",
    "üçπ Mummy ke haath ka aam panna sabko serve karo, chilled vibes! ‚ùÑÔ∏è",
    "üß∫ Terrace pe bedsheet bichhao, ghar wala picnic shuru karo!",
    "üí¶ Baccho ke ‡§≤‡§ø‡§è inflatable mini pool setup karo ‚Äì pool party at home!",
    "üé® Rangoli ya chalk se terrace decorate karo ‚Äì insta reels ke ‡§≤‡§ø‡§è perfect!",
    "üìñ Veranda ‡§Æ‡•á‡§Ç ‡§¨‡•à‡§†‡§ï‡§∞ dadi-nani ‡§∏‡•á ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§ï‡§π‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§∏‡•Å‡§®‡•ã!",
    "üç¶ Ice cream bar ‡§¨‡§®‡§æ‡§ì ghar mein ‚Äì toppings unlimited!",
    "üëí Mummy-‡§™‡§æ‡§™‡§æ ke ‡§∏‡§æ‡§• matching summer hats ‡§™‡§π‡§®‡•ã!",
    "üë£ Barefoot terrace walk ‚Äì thoda earthing bhi ho ‡§ú‡§æ‡§è!",
    "ü™Å Bacchon ke ‡§∏‡§æ‡§• ‡§™‡§§‡§Ç‡§ó ‡§â‡§°‡§º‡§æ‡§ì, sunny sky mein colors ‡§≠‡§∞ ‡§¶‡•ã!",
    "üé∂ Outdoor Bluetooth speaker ‡§≤‡§ó‡§æ‡§ì, sabka dance mood on ‡§ï‡§∞‡•ã!",
    "üèñÔ∏è Sunbathing mat bichhao aur Vitamin-D party ‡§∞‡§ñ‡•ã!",
    "üßº Baccho ‡§ï‡•á ‡§∏‡§æ‡§• car wash game ‡§ñ‡•á‡§≤‡•ã, sabko ‡§Æ‡§ú‡§º‡§æ ‡§Ü‡§è‡§ó‡§æ!",
    "üçç Tropical fruit salad ‡§¨‡§®‡§æ‡§ì aur sab milke enjoy ‡§ï‡§∞‡•ã!",
    "üé• Garden ‡§Æ‡•á‡§Ç sheet ‡§≤‡§ó‡§æ‡§ï‡•á mini movie screening ‡§∞‡§ñ‡•ã!",
    "üì∑ Sunny filter ‡§Æ‡•á‡§Ç sabka photoshoot ‡§ï‡§∞‡•ã!",
    "üåº Ghar ‡§ï‡•á plants ‡§ï‡•ã ‡§™‡§æ‡§®‡•Ä ‡§¶‡•ã aur unse ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•ã ‚Äì nature bonding!",
    "üê∂ Pet ke ‡§∏‡§æ‡§• lawn ‡§Æ‡•á‡§Ç fetch ‡§ñ‡•á‡§≤‡•ã!",
    "üçâ Watermelon cutting contest rakho ‚Äì sabke ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï slice!",
    "üßÉ Sab milke ek giant lemonade pitcher ‡§¨‡§®‡§æ‡§ì ‚Äì cheers bolo! ü•Ç"
  ],
  rainy: [
    "‚òî Window ‡§ï‡•á ‡§™‡§æ‡§∏ ‡§¨‡•à‡§†‡•ã aur barish ke ‡§∏‡§æ‡§• pakoda party ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•ã!",
    "üçµ Mummy ke haath ki masala chai sabko serve ‡§ï‡§∞‡•ã!",
    "üë£ Papa ‡§ï‡•á ‡§∏‡§æ‡§• umbrella ‡§≤‡•á‡§ï‡§∞ rainy walk ‡§ï‡§∞‡•ã!",
    "üò¥ Rain sound playlist on ‡§ï‡§∞‡•ã aur power nap ‡§≤‡•ã!",
    "‚õµ Kids ‡§ï‡•á ‡§∏‡§æ‡§• paper boat ‡§¨‡§®‡§æ ‡§ï‡•á balcony ‡§Æ‡•á‡§Ç ‡§ö‡§≤‡§æ‡§ì!",
    "üéµ ‚ÄòTip Tip Barsa Pani‚Äô ‡§µ‡§æ‡§≤‡§æ dance karo ‚Äì sab milke!",
    "üåΩ Bhutta ‡§∏‡•á‡§ï‡§®‡•á ‡§ï‡§æ competition ‡§∞‡§ñ‡•ã ‚Äì sabko apna flavour ‡§ö‡•Å‡§®‡§®‡•á ‡§¶‡•ã!",
    "üñçÔ∏è Baccho ‡§ï‡•á ‡§≤‡§ø‡§è ‚ÄòDraw the Rain‚Äô competition ‡§∞‡§ñ‡•ã!",
    "üì∏ Rainy-day look ‡§Æ‡•á‡§Ç family reel shoot ‡§ï‡§∞‡•ã!",
    "üé§ Purani romantic songs ‡§ó‡§æ‡§ì, Bollywood ‡§µ‡§æ‡§≤‡•Ä feel ke ‡§∏‡§æ‡§•!",
    "üé≤ Indoor games like Uno, Ludo aur Jenga nikalo!",
    "üç™ Rainy cookie baking session rakho sabke ‡§∏‡§æ‡§•!",
    "üìö Baccho ‡§ï‡•ã barish wali kahani sun‡§æ‡§ì ‚Äì imagination ‡§â‡§°‡§º‡§®‡•á ‡§¶‡•ã!",
    "üíÉ Mini dance-off rakho ‚Äì ‡§¨‡§æ‡§∞‡§ø‡§∂ ‡§î‡§∞ beats ‡§¶‡•ã‡§®‡•ã ‡§∏‡§æ‡§•!",
    "üßΩ Rain ke ‡§¨‡§π‡§æ‡§®‡•á car ‡§∏‡§æ‡§´ ‡§ï‡§∞ ‡§≤‡•ã ‚Äì ‡§Æ‡§ú‡§º‡§æ ‡§≠‡•Ä kaam ‡§≠‡•Ä!",
    "üî¶ Torch leke dark corner treasure hunt ‡§ï‡§∞‡•ã!",
    "ü•≥ Rainy snacks party ‡§ï‡§∞‡•ã ‚Äì ‡§π‡§∞ ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•Ä ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡•Ä ‡§ö‡•Ä‡§ú‡§º!",
    "üé¨ Bollywood rainy movie marathon rakho ‚Äì popcorn ready!",
    "üßµ Mummy ‡§∏‡•á ‡§∏‡•Ä‡§®‡§æ ‡§∏‡§ø‡§ñ‡•ã ‚Äì ‡§π‡§æ‡§• ‡§∏‡•á ‡§è‡§ï ‡§õ‡•ã‡§ü‡•Ä ‡§ö‡•Ä‡•õ ‡§¨‡§®‡§æ‡§ì!",
    "üíå Barish wali yaadon ‡§ï‡§æ scrap-book banao ‚Äì creativity time!"
  ],
  cloudy: [
    "‚òÅÔ∏è Sky pe itne badal hain jaise God ne cotton ‡§´‡•á‡§Ç‡§ï ‡§¶‡•Ä ‡§π‡•ã!",
    "üèûÔ∏è Park chalo with family ‚Äì perfect weather walk ‡§ï‡•á ‡§≤‡§ø‡§è!",
    "üëÄ Baccho ‡§ï‡•á ‡§∏‡§æ‡§• cloud shapes ‡§™‡§π‡§ö‡§æ‡§®‡§®‡•á ‡§ï‡§æ game ‡§ñ‡•á‡§≤‡•ã!",
    "üè∏ Sun ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à toh badminton ka ‡§Æ‡§ú‡§º‡§æ double!",
    "üç± Ghar ‡§Æ‡•á‡§Ç chhoti si indoor picnic ‡§ï‡§∞‡•ã mat bichake!",
    "üì∏ Cloudy photoshoot ‡§ï‡§∞‡•ã, insta-worthy background ‡§Æ‡§ø‡§≤‡•á‡§ó‡§æ!",
    "üìö Story time rakho ‚Äì mummy/dadi ‡§ï‡•Ä best stories!",
    "üé≤ Papa ke ‡§∏‡§æ‡§• chess ‡§Ø‡§æ carrom ‡§ñ‡•á‡§≤‡§®‡•á ‡§ï‡§æ challenge ‡§∞‡§ñ‡•ã!",
    "üçù Sab milke ek fav dish ‡§¨‡§®‡§æ‡§ì aur serve ‡§ï‡§∞‡•ã restaurant style!",
    "üòÇ Jokes session rakho ‚Äì ‡§π‡§∞ ‡§ï‡•ã‡§à ek funny joke ‡§∏‡•Å‡§®‡§æ‡§è!",
    "üéÆ Cloudy day gaming tournament ‚Äì PS ‡§Ø‡§æ mobile sab chalta hai!",
    "üé® Painting time ‚Äì after all, mood cloudy ‡§π‡•à ‡§™‡§∞ creativity bright!",
    "ü™Å Baccho ‡§ï‡•á ‡§∏‡§æ‡§• paper kite ‡§¨‡§®‡§æ‡§ì ‡§î‡§∞ ‡§â‡§°‡§º‡§æ‡§ì!",
    "‚òï Cloud watching ke ‡§∏‡§æ‡§• chai and samosa combo ready ‡§∞‡§ñ‡•ã!",
    "üé≠ Mini family drama act ‡§ï‡§∞‡•ã ‚Äì stage cloudy vibe wala!",
    "üî≠ Telescope ‡§Ø‡§æ binoculars ‡§∏‡•á sky observe ‡§ï‡§∞‡•ã!",
    "üé§ Antakshari ‡§ï‡§∞‡•ã ‚Äì theme ‚Äòsky & clouds‚Äô songs!",
    "üõãÔ∏è Sofa pe sab ek ‡§∏‡§æ‡§• ‡§¨‡•à‡§†‡§ï‡§∞ family ‡§´‡§®‡•Ä memory ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•ã!",
    "üßÉ Cloudy cooler ‡§¨‡§®‡§æ‡§ì ‚Äì mint lemonade, rose sharbat!",
    "üíå Cloud mood ‡§™‡§∞ ‡§è‡§ï family letter likho future ‡§ï‡•á ‡§≤‡§ø‡§è!"
  ],
  cold: [
    "üî• Ghar ka ‡§π‡•Ä‡§ü‡§∞ ya angeethi ‡§ï‡•á ‡§™‡§æ‡§∏ family jam session rakho!",
    "üçÆ Garam halwa ya gajar ka halwa sab milke banao aur ‡§ñ‡§æ‡§ì!",
    "üõèÔ∏è Blanket fort ‡§¨‡§®‡§æ‡§ì aur ‡§Ö‡§Ç‡§¶‡§∞ movie night ‡§∞‡§ñ‡•ã!",
    "üß§ Baccho ke ‡§≤‡§ø‡§è woolen dress-up contest rakho!",
    "üß¶ Mummy ‡§∏‡•á unki cozy socks ‡§Æ‡§æ‡§Å‡§ó‡•ã aur ‡§™‡§π‡§®‡•ã with chai!",
    "üìñ Fireplace vibes ‡§Æ‡•á‡§Ç story reading ‡§∞‡§ñ‡•ã ‚Äì papa ‡§¨‡•ã‡§≤‡•á aur sab ‡§∏‡•Å‡§®‡•á‡§Ç!",
    "üçú Soup ke ‡§Ö‡§≤‡§ó-‡§Ö‡§≤‡§ó flavour try karo ‚Äì tasting challenge rakho!",
    "üéß Chill music lagao aur sab mil‡§ï‡•á peaceful time ‡§≤‡•ã!",
    "üß© Puzzle solving session rakho with hot cocoa!",
    "üé® Wool craft workshop ghar ‡§Æ‡•á‡§Ç ‡§π‡•Ä ‡§∞‡§ñ ‡§≤‡•ã!",
    "üßã Kulhad wali chai sab ‡§Æ‡§ø‡§≤‡§ï‡•á market ‡§∏‡•á ‡§≤‡§æ‡§ì aur enjoy ‡§ï‡§∞‡•ã!",
    "üì∏ Winter outfits ‡§Æ‡•á‡§Ç family ‡§ï‡•Ä funny reel ‡§¨‡§®‡§æ‡§ì!",
    "üçï Oven-based pizza ban‡§æ‡§ì ‚Äì home-made cheesy delight!",
    "üé§ Karaoke session rakho ‚Äì winter blues ‡§¶‡•Ç‡§∞ ‡§≠‡§æ‡§ó‡•á!",
    "üìö Baccho ‡§ï‡•ã bedtime pe moral story ‡§∏‡•Å‡§®‡§æ‡§ì with extra cozy vibes!",
    "üß§ Gloves ‡§™‡§π‡§® ‡§ï‡§∞ snow drawing game ‡§ñ‡•á‡§≤‡•ã (chalk ‡§∏‡•á)!",
    "üë®‚Äçüç≥ Sab milke ek winter special thali ‡§¨‡§®‡§æ‡§ì!",
    "üéÅ DIY wool gift ban‡§æ‡§ì ‚Äì grandma ‡§ï‡•ã ‡§¶‡•ã surprise!",
    "üõèÔ∏è Bed heater ‡§ï‡•á ‡§™‡§æ‡§∏ ek warm word chain game ‡§ñ‡•á‡§≤‡•ã!",
    "üß£ Mummy ‡§ï‡•Ä ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä shawl ‡§™‡§π‡§® ‡§ï‡•á retro style photos ‡§≤‡•ã!"
  ],
  default: [
    "üåà Mausam ‡§ö‡§æ‡§π‡•á ‡§ú‡•ã ‡§π‡•ã ‚Äì masti toh har haal ‡§Æ‡•á‡§Ç ‡§π‡•ã‡§ó‡•Ä!",
    "üï∫üíÉ Family dance-off rakho ‚Äì ‡§ï‡•ã‡§à ‡§≠‡•Ä mood ‡§π‡•ã, beat toh banta hai!",
    "üé≠ Ghar ‡§Æ‡•á‡§Ç mini talent show ‡§∞‡§ñ‡•ã ‚Äì sab kuch perform ‡§ï‡§∞‡•á‡§Ç!",
    "ü§≥ Crazy creative family selfies ‡§≤‡•ã ‚Äì background chahe kuch bhi ‡§π‡•ã!",
    "üó∫Ô∏è Baccho ‡§ï‡•á ‡§≤‡§ø‡§è treasure hunt setup karo ‚Äì clues ‡§¨‡§®‡§æ ‡§≤‡•ã!",
    "üé™ Mini mela setup ‡§ï‡§∞‡•ã ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‚Äì popcorn, stalls ‡§î‡§∞ games!",
    "üñåÔ∏è Ek wall ‡§™‡§∞ sabki doodle art gallery ‡§¨‡§®‡§æ‡§ì!",
    "üòÇ Mummy ‡§ï‡•Ä saree ‡§∏‡•á fashion ramp walk ‡§ï‡§∞‡•ã ‚Äì sab ‡§π‡§Å‡§∏‡•á‡§Ç‡§ó‡•á!",
    "üìù Joke wall board ‡§¨‡§®‡§æ‡§ì ‚Äì sab ek joke lik‡•á‡§Ç daily!",
    "üé¨ Ek short film ‡§¨‡§®‡§æ‡§ì ‚Äì phone ‡§∏‡•á ‡§π‡•Ä direction aur acting ‡§ï‡§∞‡•ã!",
    "üéÆ Tech-free game hour ‡§∞‡§ñ‡•ã ‚Äì ‡§∏‡§ø‡§∞‡•ç‡§´ classic games allowed!",
    "üßÉ Sab milke ek unique drink recipe ‡§¨‡§®‡§æ‡§ì ‡§î‡§∞ taste test ‡§ï‡§∞‡•ã!",
    "üìö Family ke favorite books ka shelf ‡§¨‡§®‡§æ‡§ì aur review share ‡§ï‡§∞‡•ã!",
    "üéº Ek group song ‡§ó‡§æ‡§ì ‡§î‡§∞ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§¨‡§®‡§æ ‡§≤‡•ã!",
    "üñºÔ∏è Purani family photos ‡§®‡§ø‡§ï‡§≤ ‡§ï‡•á nostalgia night ‡§∞‡§ñ‡•ã!",
    "üåç Ek chhota ‚ÄòWorld Tour at Home‚Äô ‡§ï‡§∞‡•ã ‚Äì ‡§π‡§∞ country ‡§ï‡•Ä theme setup ‡§ï‡§∞‡•ã!",
    "ü•≥ Daily ek chhoti celebration ‡§ï‡§∞‡•ã ‚Äì bina wajah khushi!",
    "ü™Ñ Baccho ke ‡§∏‡§æ‡§• magic tricks ‡§∏‡•Ä‡§ñ‡•ã aur perform ‡§ï‡§∞‡•ã!",
    "üé≤ Family Olympics ‡§∞‡§ñ‡•ã ‚Äì ‡§π‡§∞ ‡§ï‡•ã‡§à ek game ‡§≤‡§æ‡§è!",
    "‚ù§Ô∏è Ghar ka gratitude jar ‡§¨‡§®‡§æ‡§ì ‚Äì sab roz ek ‡§ö‡•Ä‡§ú‡§º lik‡•á‡§Ç ‡§ú‡§ø‡§∏‡§Æ‡•á‡§Ç ‡§ñ‡•Å‡§∂‡•Ä ‡§π‡•ã!"
  ]
};

      // Audio context for handling autoplay restrictions
      let audioContext;
      let audioElement;
      let isMusicPlaying = false;
      let currentTrack = "";
      let audioInitialized = false;

      document.getElementById("year").textContent = new Date().getFullYear();
      let searchHistory =
        JSON.parse(localStorage.getItem("weatherHistory")) || [];

      function getRandomActivity(condition) {
        let activities;

        if (condition.includes("sun") || condition.includes("clear")) {
          activities = weatherActivities.sunny;
        } else if (
          condition.includes("rain") ||
          condition.includes("drizzle")
        ) {
          activities = weatherActivities.rainy;
        } else if (condition.includes("cloud")) {
          activities = weatherActivities.cloudy;
        } else if (condition.includes("cold") || condition.includes("snow")) {
          activities = weatherActivities.cold;
        } else {
          activities = weatherActivities.default;
        }

        return activities[Math.floor(Math.random() * activities.length)];
      }

      // Initialize audio system
      function initAudio() {
        if (audioInitialized) return;

        // Create audio element
        audioElement = new Audio();
        audioElement.loop = true;

        // Setup audio context
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        const source = audioContext.createMediaElementSource(audioElement);
        source.connect(audioContext.destination);

        // Resume audio context when user interacts (to handle autoplay policies)
        document.addEventListener(
          "click",
          () => {
            if (audioContext.state === "suspended") {
              audioContext.resume();
            }
          },
          { once: true }
        );

        audioInitialized = true;
      }

      // Play weather-appropriate music
      function playWeatherMusic(condition) {
        if (!audioInitialized) initAudio();

        let musicFile;
        let musicName;

        if (condition.includes("sun") || condition.includes("clear")) {
          musicFile = "sounds/sunny.mp3";
          musicName = "‚òÄÔ∏è Sunny Day Music";
        } else if (
          condition.includes("rain") ||
          condition.includes("drizzle")
        ) {
          musicFile = "sounds/rain.mp3";
          musicName = "üåßÔ∏è Rainy Day Music";
        } else if (condition.includes("cloud")) {
          musicFile = "sounds/cloudy.mp3";
          musicName = "‚òÅÔ∏è Cloudy Day Music";
        } else if (condition.includes("cold") || condition.includes("snow")) {
          musicFile = "sounds/cold.mp3";
          musicName = "‚ùÑÔ∏è Cold Day Music";
        } else {
          musicFile = "sounds/default.mp3";
          musicName = "üåà Weather Music";
        }

        // Only change if it's a new track
        if (currentTrack !== musicFile) {
          currentTrack = musicFile;
          audioElement.src = musicFile;
          document.getElementById("musicInfo").textContent = musicName;

          // Try to play (might fail due to autoplay policies)
          audioElement
            .play()
            .then(() => {
              isMusicPlaying = true;
              document.getElementById("musicControl").innerHTML =
                '<i class="fas fa-pause"></i>';
              document.getElementById("musicPlayer").style.display = "flex";
            })
            .catch((error) => {
              console.log(
                "Autoplay prevented, will play after user interaction"
              );
              isMusicPlaying = false;
              document.getElementById("musicControl").innerHTML =
                '<i class="fas fa-play"></i>';
              document.getElementById("musicPlayer").style.display = "flex";
            });
        } else if (isMusicPlaying) {
          // If same track and already playing, ensure controls are visible
          document.getElementById("musicPlayer").style.display = "flex";
        }
      }

      // Toggle music play/pause
      function toggleMusic() {
        if (!audioInitialized) initAudio();

        if (isMusicPlaying) {
          audioElement.pause();
          document.getElementById("musicControl").innerHTML =
            '<i class="fas fa-play"></i>';
        } else {
          audioElement
            .play()
            .then(() => {
              document.getElementById("musicControl").innerHTML =
                '<i class="fas fa-pause"></i>';
            })
            .catch((error) => {
              alert(
                "Please interact with the page first to allow audio playback"
              );
            });
        }
        isMusicPlaying = !isMusicPlaying;
      }

      async function getWeather(location = null) {
        const btn = document.getElementById("checkBtn");
        const input = document.getElementById("locationInput");

        if (!location) location = input.value.trim();
        if (!location) {
          alert("Yaar kuch toh likho! Sheher ka naam batao na üòä");
          return;
        }

        if (btn) {
          btn.disabled = true;
          btn.innerHTML =
            '<i class="fas fa-spinner fa-spin mr-2"></i> Dhundh raha hoon...';
        }

        if (location && !searchHistory.includes(location)) {
          searchHistory.unshift(location);
          if (searchHistory.length > 5) searchHistory.pop();
          localStorage.setItem("weatherHistory", JSON.stringify(searchHistory));
          updateHistory();
        }

        try {
          const res = await fetch(
            `https://api.weatherapi.com/v1/forecast.json?key=e9c43fcf2e9c4868a3b71728252106&q=${location}&days=1&aqi=yes`
          );
          if (!res.ok) throw new Error("API error");
          const data = await res.json();

          const condition = data.current.condition.text.toLowerCase();
          const emojiMap = {
            sunny: "‚òÄÔ∏è",
            clear: "‚òÄÔ∏è",
            "partly cloudy": "‚õÖ",
            cloudy: "‚òÅÔ∏è",
            overcast: "üå•Ô∏è",
            mist: "üå´Ô∏è",
            "patchy rain nearby": "üå¶Ô∏è",
            "light rain": "üåßÔ∏è",
            "moderate rain": "üåßÔ∏è",
            "heavy rain": "‚õàÔ∏è",
            thunderstorm: "üå©Ô∏è",
            snow: "‚ùÑÔ∏è",
            fog: "üåÅ",
            drizzle: "üåßÔ∏è",
          };

          const emoji = emojiMap[condition] || "üåà";
          const background = getThemeFromCondition(condition);
          document.body.className =
            background +
            " min-h-screen flex flex-col items-center px-4 py-6 transition-all duration-500";

          const activity = getRandomActivity(condition);

          document.getElementById("weatherInfo").innerHTML = `
          <div class="bg-white/30 backdrop-blur-md rounded-2xl p-6 shadow-xl mt-6 w-full max-w-md animate-fadeIn text-gray-900">
            <div class="flex items-center justify-between">
              <div>
                <h2 class="text-2xl font-bold">üèôÔ∏è ${data.location.name}, ${
            data.location.region
          }</h2>
                <p class="text-sm text-gray-700">üåè ${
                  data.location.country
                } | üï∞Ô∏è ${data.location.localtime}</p>
              </div>
              <img src="${
                data.current.condition.icon
              }" alt="weather icon" class="w-16 h-16">
            </div>
            
            <div class="mt-4">
              <p class="text-xl font-semibold">${emoji} ${
            data.current.temp_c
          }¬∞C - ${data.current.condition.text}</p>
              <p class="text-sm text-gray-800 mt-2">üí® Hawa: ${
                data.current.wind_kph
              } kph (${data.current.wind_dir})</p>
              <p class="text-sm text-gray-800">üíß Nami: ${
                data.current.humidity
              }% | üòÖ Mehsoos: ${data.current.feelslike_c}¬∞C</p>
              <p class="text-sm text-gray-800">‚òÄÔ∏è UV: ${
                data.current.uv
              } | üè≠ AQI: ${
            data.current.air_quality?.pm2_5?.toFixed(1) || "NA"
          }</p>
            </div>
            
            <div class="himanshu-bubble animate-fadeIn">
              <p class="font-bold text-blue-800">Himanshu Says üó£Ô∏è :</p>
              <p class="text-gray-800">"${activity}"</p>
            </div>
            
            <canvas id="forecastChart" class="mt-4" height="120"></canvas>
            
            <div class="mt-4 text-sm text-gray-600">
              <p>üìä Pressure: ${data.current.pressure_mb} mb</p>
              <p>üëÄ Visibility: ${data.current.vis_km} km | ‚òÅÔ∏è Badal: ${
            data.current.cloud
          }%</p>
            </div>
          </div>
        `;

          // Play weather-appropriate music
          playWeatherMusic(condition);

          // Hourly forecast chart
          const labels = data.forecast.forecastday[0].hour.map(
            (h) => h.time.split(" ")[1]
          );
          const temps = data.forecast.forecastday[0].hour.map((h) => h.temp_c);
          const ctx = document.getElementById("forecastChart").getContext("2d");
          new Chart(ctx, {
            type: "line",
            data: {
              labels: labels,
              datasets: [
                {
                  label: "Har ghante ka temperature (¬∞C)",
                  data: temps,
                  borderColor: "#2563eb",
                  backgroundColor: "#93c5fd",
                  tension: 0.4,
                  fill: true,
                },
              ],
            },
            options: {
              responsive: true,
              plugins: { legend: { display: false } },
              scales: {
                y: { beginAtZero: false },
              },
            },
          });
        } catch (err) {
          document.getElementById("weatherInfo").innerHTML = `
          <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 mt-6 rounded animate-fadeIn" role="alert">
            <p class="font-bold">Oops! Kuch toh gadbad hai</p>
            <p>Yaar location sahi se likho na, nahi mil raha. Koi aur jagah try karo!</p>
          </div>
        `;
        } finally {
          if (btn) {
            btn.disabled = false;
            btn.innerHTML =
              '<i class="fas fa-cloud-sun mr-2"></i> Pata Karo Mausam Ka!';
          }
        }
      }

      function getThemeFromCondition(condition) {
        if (condition.includes("rain"))
          return "bg-gradient-to-br from-blue-800 via-blue-600 to-blue-400";
        if (condition.includes("sun") || condition.includes("clear"))
          return "bg-gradient-to-br from-yellow-200 via-yellow-300 to-yellow-400";
        if (condition.includes("cloud"))
          return "bg-gradient-to-br from-gray-300 via-gray-400 to-gray-500";
        if (condition.includes("snow"))
          return "bg-gradient-to-br from-blue-100 via-white to-blue-200";
        if (condition.includes("cold"))
          return "bg-gradient-to-br from-blue-200 via-blue-300 to-blue-400";
        return "bg-gradient-to-br from-blue-100 via-blue-200 to-blue-300";
      }

      function updateHistory() {
        const container = document.getElementById("history");
        container.innerHTML = searchHistory
          .map(
            (loc) =>
              `<button onclick="getWeather('${loc}')" class="px-3 py-1 bg-white/40 text-sm rounded-full shadow hover:bg-white/60 transition">${loc}</button>`
          )
          .join(" ");
      }

      async function autoSuggest(query) {
        const suggestionsBox = document.getElementById("suggestions");
        if (!query || query.length < 2) {
          suggestionsBox.classList.add("hidden");
          return;
        }

        try {
          const res = await fetch(
            `https://api.weatherapi.com/v1/search.json?key=e9c43fcf2e9c4868a3b71728252106&q=${query}`
          );
          if (!res.ok) throw new Error("API error");
          const data = await res.json();

          if (data.length === 0) {
            suggestionsBox.classList.add("hidden");
            return;
          }

          suggestionsBox.innerHTML = data
            .map(
              (loc) =>
                `<div onclick="selectCity('${loc.name}, ${loc.region}')">${loc.name}, ${loc.region} (${loc.country})</div>`
            )
            .join("");
          suggestionsBox.classList.remove("hidden");
        } catch (err) {
          suggestionsBox.classList.add("hidden");
        }
      }

      function selectCity(city) {
        document.getElementById("locationInput").value = city.split(",")[0];
        document.getElementById("suggestions").classList.add("hidden");
        getWeather(city);
      }

      document.addEventListener("click", (e) => {
        if (
          !document.getElementById("locationInput").contains(e.target) &&
          !document.getElementById("suggestions").contains(e.target)
        ) {
          document.getElementById("suggestions").classList.add("hidden");
        }
      });

      window.onload = () => {
        updateHistory();
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(
            async (pos) => {
              const lat = pos.coords.latitude;
              const lon = pos.coords.longitude;
              await getWeather(`${lat},${lon}`);
            },
            () => {
              // Default to Delhi if location access denied
              getWeather("jaithra");
            }
          );
        } else {
          getWeather("jaithra");
        }
      };

      function startVoice() {
        const recognition = new (window.SpeechRecognition ||
          window.webkitSpeechRecognition)();
        recognition.lang = "en-IN";
        recognition.start();
        recognition.onresult = (event) => {
          document.getElementById("locationInput").value =
            event.results[0][0].transcript;
          getWeather();
        };
      }
    </script>
  </body>
</html>
